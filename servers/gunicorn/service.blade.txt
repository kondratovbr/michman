[Unit]
Description=gunicorn daemon for {{ $projectName }} at {{ $domain }} project
Requires={{ $projectName }}.sock
After=network.target

[Service]
User={{ $username }}
Group={{ $username }}
WorkingDirectory=/home/{{ $username }}/{{ $domain }}
ExecStart=/home/{{ $username }}/{{ $domain }}/venv/bin/gunicorn \
    --config /home/{{ $username }}/.michman/{{ $projectName }}_gunicorn_config.py \
    --access-logfile - \
    --bind unix:/run/{{ $projectName }}.sock \
    {{ $projectName }}.wsgi:application
ExecReload=/bin/kill -s HUP $MAINPID
KillMode=mixed
TimeoutStopSec=5
PrivateTmp=true

[Install]
WantedBy=multi-user.target
